import { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } from "@google/generative-ai";


const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_AI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash",
});

const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
};

export const chatSession = model.startChat({
    generationConfig,
    history: [
        {
            role: "user",
            parts: [
                { text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget, Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating, Time travel each of the location for 3 days with each day plan with best time to visit in JSON format." },
            ],
        },
        {
            role: "model",
            parts: [
                { text: "Okay, here's a JSON format travel plan for Las Vegas for 3 days for a couple on a budget, along with hotel options and itinerary suggestions.  Keep in mind that prices can fluctuate greatly depending on the time of year, day of the week, and how far in advance you book.  **I'll use *estimated* prices and ratings based on publicly available data.**  Double-check everything before booking!\n\n**Important Considerations for Budget Travel in Vegas:**\n\n*   **Travel Dates:** Avoid weekends, holidays, and conventions. Mid-week (Tuesday-Thursday) is usually cheapest.\n*   **Transportation:** Public transportation (the Deuce bus) or rideshares (Uber/Lyft) can be more cost-effective than renting a car. Walking is also an option on the Strip, but it can be very hot.\n*   **Food:** Take advantage of happy hour deals, fast food options, and grocery stores to save on meals.\n*   **Gambling:** Set a strict budget and stick to it! Low-limit tables are available, or skip gambling altogether.\n*   **Free Activities:** Vegas has many free attractions.\n\n```json\n{\n  \"tripDetails\": {\n    \"location\": \"Las Vegas, Nevada\",\n    \"duration\": \"3 Days\",\n    \"budget\": \"Cheap/Budget-Friendly\",\n    \"travelers\": \"Couple\"\n  },\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n        \"currency\": \"USD\",\n        \"averageNightlyRate\": 45 //Estimated - can vary wildly\n      },\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1c/47/89/9a/exterior.jpg?w=1200&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1355,\n        \"longitude\": -115.1656\n      },\n      \"rating\": 3.5,\n      \"description\": \"A classic Vegas hotel known for its affordable rates, circus acts, and Adventuredome theme park. It is on the northern end of the Strip. Rooms are basic but functional.\",\n\t  \"amenities\": [\"Free parking\", \"Pool\", \"Casino\", \"Restaurants\", \"Theme Park\"]\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n        \"currency\": \"USD\",\n        \"averageNightlyRate\": 55 //Estimated - can vary wildly\n      },\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/23/59/99/48/excalibur-hotel-casino.jpg?w=1200&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0985,\n        \"longitude\": -115.1744\n      },\n      \"rating\": 4.0,\n      \"description\": \"A medieval-themed hotel with affordable rates, a pool complex, and multiple dining options. It's located at the southern end of the Strip.\",\n\t   \"amenities\": [\"Free parking\", \"Pool\", \"Casino\", \"Restaurants\", \"Shows\"]\n    },\n    {\n      \"hotelName\": \"Luxor Hotel & Casino\",\n      \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n      \"price\": {\n        \"currency\": \"USD\",\n        \"averageNightlyRate\": 65 //Estimated - can vary wildly\n      },\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/a2/b0/28/luxor-hotel-casino.jpg?w=1200&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0956,\n        \"longitude\": -115.1762\n      },\n      \"rating\": 4.0,\n      \"description\": \"An iconic pyramid-shaped hotel with affordable rates and a variety of attractions. It is on the southern end of the Strip.\",\n\t   \"amenities\": [\"Free parking\", \"Pool\", \"Casino\", \"Restaurants\", \"Shows\"]\n    },\n     {\n      \"hotelName\": \"Stratosphere Hotel, Casino & Tower\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": {\n        \"currency\": \"USD\",\n        \"averageNightlyRate\": 40 //Estimated - can vary wildly\n      },\n      \"hotelImageURL\": \"https://dynamic-media-cdn.tripadvisor.com/media/photo-o/1b/4b/46/e1/the-strat-hotel-casino.jpg?w=1200&h=-1&s=1\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1468,\n        \"longitude\": -115.1555\n      },\n      \"rating\": 3.5,\n      \"description\": \"Offers affordable rates and the tallest freestanding observation tower in the United States, with thrilling rides. Located at the northern end of the Strip.\",\n\t   \"amenities\": [\"Free parking\", \"Pool\", \"Casino\", \"Restaurants\", \"Tower Rides\"]\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the South Strip & Free Attractions\",\n      \"bestTimeToVisit\": \"Morning/Afternoon: High Roller, Evening: Bellagio Fountains\",\n      \"schedule\": [\n        {\n          \"placeName\": \"Welcome to Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign for a photo opportunity. Located on the southern end of the Strip.\",\n          \"placeImageURL\": \"https://www.lasvegasadvisor.com/wp-content/uploads/2022/07/welcome-to-las-vegas-sign-900x600.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0828,\n            \"longitude\": -115.1725\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0\n          },\n          \"rating\": 4.5,\n          \"travelTimeFromHotel\": \"15-20 minutes (by bus/rideshare from Circus Circus)\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Beautiful themed floral displays. Free to enter.\",\n          \"placeImageURL\": \"https://www.wheretraveler.com/sites/default/files/styles/featured_image_450x450/public/Bellagio_Conservatory_Flickr_by_jenniflower.jpg?itok=wz90d0_R\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1742\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0\n          },\n          \"rating\": 4.8,\n          \"travelTimeFromHotel\": \"25-30 minutes (by bus/rideshare from Circus Circus)\"\n        },\n        {\n          \"placeName\": \"Bellagio Fountains\",\n          \"placeDetails\": \"Spectacular free water show with music and lights. Shows every 30 minutes in the afternoon and every 15 minutes in the evening.\",\n          \"placeImageURL\": \"https://i.ytimg.com/vi/mEa8z_3gCio/maxresdefault.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1742\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0\n          },\n          \"rating\": 4.9,\n          \"travelTimeFromHotel\": \"Same location as Conservatory\"\n        },\n        {\n          \"placeName\": \"LINQ Promenade & High Roller Observation Wheel (Optional)\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment district. The High Roller offers stunning views of the city. (High Roller ticket is an added cost, consider only if budget allows).\",\n          \"placeImageURL\": \"https://res.cloudinary.com/simpleview/image/upload/crm/lasvegas/High-Roller-Las-Vegas_1130-c1b39d2b5056a36_c1b39e82-5056-a36a-0772c4764137ca72.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1165,\n            \"longitude\": -115.1704\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0\n          },\n          \"rating\": 4.5,\n          \"travelTimeFromHotel\": \"20-25 minutes (by bus/rideshare from Bellagio)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Las Vegas & Fremont Street Experience\",\n      \"bestTimeToVisit\": \"Afternoon: Explore shops/museums, Evening: Fremont Street Experience\",\n      \"schedule\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall with a massive video screen canopy, light shows, street performers, and casinos.\",\n          \"placeImageURL\": \"https://handluggageonly.co.uk/wp-content/uploads/2016/11/Hand-Luggage-Only-Fremont-Street-Experience-in-Las-Vegas-2.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1701,\n            \"longitude\": -115.1421\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0\n          },\n          \"rating\": 4.6,\n          \"travelTimeFromHotel\": \"20-30 minutes (by bus/rideshare from the Strip)\"\n        },\n        {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"Unique shopping and dining experience built from shipping containers.\",\n          \"placeImageURL\": \"https://cdn.aarp.net/content/dam/aarp/travel/destinations/2017/01/1140-container-park-las-vegas.imgcache.rev086b36699426193a599b547f856443d8.web.640.360.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1702,\n            \"longitude\": -115.1403\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0\n          },\n          \"rating\": 4.3,\n          \"travelTimeFromHotel\": \"Short walk from Fremont Street\"\n        },\n        {\n          \"placeName\": \"Neon Museum Boneyard (Optional)\",\n          \"placeDetails\": \"Outdoor display of vintage Las Vegas signs. Tickets required, and reservations are recommended. (Added cost, consider if budget allows).\",\n          \"placeImageURL\": \"https://www.neonmuseum.org/wp-content/uploads/2022/07/Neon-Museum-web-hero-image.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1774,\n            \"longitude\": -115.1408\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 30\n          },\n          \"rating\": 4.7,\n          \"travelTimeFromHotel\": \"5-10 minutes by rideshare from Fremont Street\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"North Strip Exploration & Departure\",\n      \"bestTimeToVisit\": \"Morning:  Explore Resorts World , Afternoon: Relax, Depart\",\n      \"schedule\": [\n       {\n          \"placeName\": \"Resorts World\",\n          \"placeDetails\": \"Newest mega resort on the North Strip, explore the architecture and retail shops\",\n          \"placeImageURL\": \"https://assets.simpleviewinc.com/simpleview/image/upload/c_fill,g_xy_center,h_360,w_640,x_841,y_287/v1/clients/lasvegas/Resorts_World_Las_Vegas_facade_5684803e-078f-4a62-916872952c48bb9e.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1436,\n            \"longitude\": -115.1611\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0\n          },\n          \"rating\": 4.2,\n          \"travelTimeFromHotel\": \"5-10 minutes (by bus/rideshare from Stratosphere)\"\n        },\n         {\n          \"placeName\": \"Venetian & Palazzo Canals\",\n          \"placeDetails\": \"Experience a taste of Venice with indoor canals, gondola rides, and Italian architecture. Gondola rides are an added cost.\",\n          \"placeImageURL\": \"https://a.cdn-hotels.com/gdcs/production147/d207/75df2979-fd55-4f16-a2ae-e9593546685c.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1214,\n            \"longitude\": -115.1741\n          },\n          \"ticketPricing\": {\n            \"currency\": \"USD\",\n            \"price\": 0 //Free to walk around, gondola ride is extra\n          },\n          \"rating\": 4.7,\n          \"travelTimeFromHotel\": \"15-20 minutes (by bus/rideshare from Resorts World)\"\n        },\n        {\n          \"placeName\": \"Relax & Depart\",\n          \"placeDetails\": \"Enjoy a final meal, do some last-minute souvenir shopping, and head to the airport for your departure.\",\n          \"placeImageURL\": null,\n          \"geoCoordinates\": null,\n          \"ticketPricing\": null,\n          \"rating\": null,\n          \"travelTimeFromHotel\": \"Variable, depending on airport and transportation\"\n        }\n      ]\n    }\n  }\n}\n```\n\n**Important Notes and Tips:**\n\n*   **Hotel Prices:**  The hotel prices I've provided are *very* rough estimates. Check booking websites (like Booking.com, Expedia, Hotels.com) for real-time pricing and deals. Look for discounts, especially if you're a member of AAA or other organizations.\n*   **Flexibility:** Be willing to adjust your itinerary based on your interests and budget.\n*   **Water:** Stay hydrated!  Vegas is a desert. Carry a water bottle and refill it whenever possible.\n*   **Sun Protection:** Wear sunscreen, hats, and sunglasses.\n*   **Walking Shoes:** You'll be doing a lot of walking, so comfortable shoes are essential.\n*   **Free Entertainment:** Look for free shows, attractions, and events happening during your visit. Hotel lobbies often have free entertainment.\n*   **Happy Hour:** Take advantage of happy hour deals at bars and restaurants to save on drinks and appetizers.\n*   **Transportation Costs:** Factor in the cost of buses or rideshares when planning your itinerary.\n*   **Show Tickets:** If you want to see a show, book in advance for the best prices. Consider matinee performances for discounts.\n*   **Restaurant Deals:** Look for coupons and deals online or in tourist publications.  Consider off-Strip dining options for cheaper meals.\n*   **Buffets:**  Some buffets can be a good value, especially if you're hungry. However, prices have increased significantly.\n\nRemember to customize this plan to fit your specific interests and budget! Have a great trip to Las Vegas!\n" },
            ],
        },
    ],
});